<!-- // MIT License

// Copyright (c) 2019 teamCMS

// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:

// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.

// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE. -->

<body class="hg">
<header class="hg__header">
    <app-top-nav-bar></app-top-nav-bar>
</header>
    <main class="hg__main">
    <mat-card class="outerMatCard">
        <div class="container">

            <div class="packages">
              <br>
              <mat-accordion class="example-headers-align" multi="false">
                <div *ngFor="let package of packages; let i = index">
                    <mat-expansion-panel [expanded]>
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          <span>{{ packages[0].department.name}}, Dossier #{{package.id}}</span>
                        </mat-panel-title>
                      </mat-expansion-panel-header>

                        <div><a class="request" (click)="packageSelect(package.id, 0, 'pipeline')">
                          Progress
                        </a></div><br><br>

                      <div *ngFor="let request of package.requests">
                        <a class="request"
                           (click)="packageSelect(package.id, request.id, 'editForm/'+request.originalId)">Request:
                          {{request.title}}</a>
                        <!--
                        <div>
                            <label>
                                <input type="file" (change)="selectFile($event)">
                            </label>
                            <button [disabled]="!selectedFiles" (click)="upload(request.id)">Upload Support
                                Document</button><br><br>
                        </div>
                        -->
                      </div>
                      <div>
                        <br> <a class="new-request" (click)="packageSelect(package.id, 0, 'search')">Create new
                          request</a>
                      </div>
                      <br><br>
                      <app-support-documents></app-support-documents>
                      <br>

                      <div class="right">
                        <!--
                        <button mat-stroked-button color="primary" (click)="generatePdf(package.id, i)">Generate
                            PDF</button>
                        -->
                        <button mat-stroked-button color="primary" (click)="upload(package.id)">Upload
                          Files</button>
                        <button mat-stroked-button color="primary" (click)="viewPdf(package.id)">View PDF</button>

                        <a (click)="packageSelect(package.id, 0, 'approval')">
                          <button mat-stroked-button color="primary">Submit for Approval</button>
                        </a>
                      </div>
                    </mat-expansion-panel>
                            <a (click)="packageSelect(package.id, 0, 'approval')">
                                <button mat-stroked-button color="primary">Submit for Approval</button>
                            </a>

                            <a (click)="viewAllRevisions(package.id, 'revisions')">
                                <button mat-stroked-button color="primary">View All Revisions</button>
                            </a>
                        </div>
                    </mat-card>
                    <br>
                </div>
          </mat-accordion> <br>
            </div>


            <button mat-raised-button color="primary" class="bottom" (click)="createNewPackage()" href="">Create new
                Package</button>
        </div>
      <br>
    </mat-card>
      </main>
    <footer class="hg__footer">
    <app-footer></app-footer>
      </footer>
</body>
