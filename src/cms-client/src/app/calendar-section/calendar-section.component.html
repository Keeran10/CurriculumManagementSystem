<body class="hg">
  <header class="hg__header">
    <app-top-nav-bar></app-top-nav-bar>
  </header>
  <main class="hg__main">
    <mat-card class="matCardBackground">


      <div class="container">

        <mat-card>
          <mat-card-header>
            <h1 class="title">Edit Section Page</h1>
          </mat-card-header><br>
          <form class="edit-form">
            <mat-form-field class="row1" *ngIf="sectionEditable.sectionId !== null">
              <input matInput placeholder="Section Id" spellcheck="true" [(ngModel)]="sectionEditable.sectionId"
                name="sectionId">
            </mat-form-field>
            <mat-form-field class="row2">
              <input matInput placeholder="Section title" spellcheck="true" [(ngModel)]="sectionEditable.sectionTitle"
                name="sectionTitle">
            </mat-form-field>
            <mat-form-field *ngIf="sectionEditable.firstParagraph !== undefined || sectionEditable.introParagraph !== undefined" class="row3">
              <textarea *ngIf="sectionEditable.firstParagraph !== undefined" matInput placeholder="First Paragraph" [(ngModel)]="sectionEditable.firstParagraph"
                spellcheck="true" name="firstParagraph"></textarea>
                <textarea *ngIf="sectionEditable.introParagraph !== undefined" matInput placeholder="First Paragraph" [(ngModel)]="sectionEditable.introParagraph"
                spellcheck="true" name="introParagraph"></textarea>
            </mat-form-field>

            <mat-form-field class="row4">
              <textarea matInput placeholder="First Core" [(ngModel)]="sectionEditable.firstCore" spellcheck="true"
                name="firstCore"></textarea>
            </mat-form-field>

            <mat-form-field class="row5">
              <textarea matInput placeholder="Second Core" [(ngModel)]="sectionEditable.secondCore" spellcheck="true"
                name="secondCore"></textarea>
            </mat-form-field>

            <mat-form-field class="row6">
              <textarea matInput placeholder="Rationale" spellcheck="true" [(ngModel)]="editedExtraModel.rationale"
                name="rationale"></textarea>
            </mat-form-field>
            <mat-form-field class="row7">
              <textarea matInput placeholder="Resource Implications" spellcheck="true"
                [(ngModel)]="editedExtraModel.implications" name="implications"></textarea>
            </mat-form-field>
          </form>

          <table class="leftTable">
            <tbody>
            <tr>

              <div class="row8" *ngIf="isDoneLoading">
                <div *ngFor="let c of printedCourses; let i = index">
                  <br class="courseLinks">
                  <span>
                    <td>
                      <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td>
                      </span>
                    </td>
                    <td class="deleteCourse" (click)="removeCourseFromCore(c)">
                      <font color="red" style="cursor: pointer;">[x]</font>
                    </td>
                  </span>
                </div>
              </div>
              <span class="row9">
                <mat-form-field>
                  <input class="full-width" type="text" placeholder="Add a course to core" matInput 
                  [formControl]="myControl" [matAutocomplete]="auto">
                  <mat-autocomplete #auto="matAutocomplete">
                  <mat-option *ngFor="let course of allCourses" [value]="course.title">
                    {{course.name}} {{course.number}} {{course.title}}
                  </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
                <button class="mat-search" mat-raised-button color="primary" (click)="addCourseToCore()">
                  Add
                </button>
              </span>
            </tr>
            </tbody>
          </table>
          <br/>
<!-- ELECTIVES -->
          <mat-card-content *ngIf="sectionEditable.electivesHeader !== undefined" class="row8">
            <h2>{{ sectionEditable.electivesHeader}}</h2><br/>
            <div>Electives Description:</div>
            <textarea matInput placeholder="Electives Description" [(ngModel)]="sectionEditable.electivesDescription" spellcheck="true"
                name="electivesDescription"></textarea>
          </mat-card-content>
<!-- FIRST OPTION (MECH) -->
          <table *ngIf="sectionEditable.firstOption !== undefined" class="leftTable">
              <tbody>
                <strong>{{ sectionEditable.firstOption }}</strong>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.firstOptionCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody> <br />
            </table>
<!-- SECOND OPTION (MECH) -->
            <table *ngIf="sectionEditable.secondOption !== undefined" class="leftTable">
              <tbody>
                <strong>{{ sectionEditable.secondOption }}</strong>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.sectionOptionCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody><br />
            </table> 
<!-- THIRD OPTION (MECH) -->
            <table *ngIf="sectionEditable.thirdOption !== undefined" class="leftTable">
              <tbody>
              <strong>{{ sectionEditable.thirdOption }}</strong>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.thirdOptionCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody><br />
            </table> 
<!-- FOURTH OPTION (MECH) -->
            <table *ngIf="sectionEditable.fourthOption !== undefined" class="leftTable">
              <tbody>
              <strong>{{ sectionEditable.fourthOption }}</strong>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.fourthOptionCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody><br />
            </table> 
<!-- FIFTH OPTION (MECH) -->
            <table *ngIf="sectionEditable.fifthOption !== undefined" class="leftTable">
              <tbody>
              <strong>{{ sectionEditable.fifthOption }}</strong>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.fifthOptionCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody><br />
            </table> 
<!-- SIXTH OPTION (MECH) -->
            <table *ngIf="sectionEditable.sixthOption !== undefined" class="leftTable">
              <tbody>
              <strong>{{ sectionEditable.sixthOption }}</strong>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.sixthOptionCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody><br />
            </table> 
<!-- ELECTIVE COURSES (INDU) -->
            <table *ngIf="sectionEditable.electivesDescription !== undefined" class="leftTable">
              <tbody>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.electiveCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody><br />
            </table> 
<!-- NATURAL SCIENCE COURSES (INDU) -->
            <table *ngIf="sectionEditable.scienceHeader !== undefined" class="row8">
              <h4>{{ sectionEditable.scienceHeader }}</h4><br />
              <div>Natural Science Description:</div>
            <textarea matInput placeholder="Natural Science Description" [(ngModel)]="sectionEditable.scienceDescription" spellcheck="true"
                name="scienceDescription"></textarea>
              <tbody>
              <tr>
                <div class="row8" *ngIf="isDoneLoading">
                  <div *ngFor="let c of sectionEditable.scienceCoreCourses; let i = index">
                    <br class="courseLinks">
                    <span class="link" (click)="navigateToEditFormEdited(courseIds[2*i], courseIds[2*i+1])">
                      <td class="courseNumberLeft">{{ c.name }} {{c.number}}</td>
                      <td class="courseTitle"> {{c.title}}</td>
                      <td class="courseCredits">{{c.credits.toFixed(2)}} </td> </span>
                  </div>
                </div>
              </tr>
              </tbody><br />
            </table> 
        </mat-card>

          <mat-card class="edited-tex">
            <!-- Section and title -->
            <span>
              <b>
                <span style="display: inline-block" semanticDiff [left]="sectionOriginal.sectionId"
                  [right]="sectionOriginal.sectionId"></span>&nbsp;
                <b>
                  <span style="display: inline-block" semanticDiff [left]="sectionOriginal.sectionTitle"
                    [right]="sectionEditable.sectionTitle"></span> <br>
                </b>
              </b>
            </span>
            <br>

            <!-- paragraph description -->
            <span>
              <span style="display: inline-block" semanticDiff [left]="sectionOriginal.firstParagraph"
                [right]="sectionEditable.firstParagraph"></span>
                <span style="display: inline-block" semanticDiff [left]="sectionOriginal.introParagraph"
                [right]="sectionEditable.introParagraph"></span><br><br>
              <!-- first core -->

              <b>
                <span style="display: inline-block">
                  <span style="display: inline-block" semanticDiff [left]="sectionOriginal.firstCore"
                    [right]="sectionEditable.firstCore"></span>
                </span> (30.5 Credits) </b>
              <br>
              See&nbsp;<span class="fake-link">&#167;71.20.5</span><br><br>

              <!-- second core -->


              <!-- course list -->

                <table>
                  <tbody>
                   <tr>
                      <th width="100%"> <b>
                <span style="display: inline-block">
                  <span style="display: inline-block" semanticDiff [left]="sectionOriginal.secondCore"
                        [right]="sectionEditable.secondCore">
                  </span>
                </span>
              </b>
                      <i style="font-weight: normal; margin-left: 50%;">Credits</i> </th>
                   </tr>
              <div class="right-side" *ngIf="isDoneLoading"><br>
<!-- CORE COURSES -->
        <div *ngFor="let c of printedCourses; let i = index">
            <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

              <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                    <td class="courseTitle">{{c.title}}</td>
                    <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
              </span>
            </div>

            <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
                <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
                <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
            </div>
        </div><br />
<!-- ELECTIVES -->
        <h4 *ngIf="sectionEditable.electivesHeader !== undefined">{{ sectionEditable.electivesHeader }}</h4>
        <div *ngIf="sectionEditable.electivesDescription!==undefined"> {{sectionEditable.electivesDescription}}</div>
<!-- first option: AERO -->
        <div *ngIf="sectionEditable.firstOption !== undefined"><strong>{{ sectionEditable.firstOption }}</strong>
        <div *ngFor="let c of sectionEditable.firstOptionCourses; let i = index">
          <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

            <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                  <td class="courseTitle">{{c.title}}</td>
                  <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
            </span>
          </div>

          <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
              <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
              <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
          </div>
      </div><br /></div>

    <!-- second option (MECH) -->
    <div *ngIf="sectionEditable.firstOption !== undefined"><strong>{{ sectionEditable.secondOption }}</strong>
      <div *ngFor="let c of sectionEditable.sectionOptionCourses; let i = index">
        <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

          <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                <td class="courseTitle">{{c.title}}</td>
                <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
          </span>
        </div>

        <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
            <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
            <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
        </div>
    </div><br /></div>

    <!-- third option (MECH) -->
    <div *ngIf="sectionEditable.thirdOption !== undefined"><strong>{{ sectionEditable.thirdOption }}</strong>
      <div *ngFor="let c of sectionEditable.thirdOptionCourses; let i = index">
        <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

          <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                <td class="courseTitle">{{c.title}}</td>
                <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
          </span>
        </div>

        <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
            <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
            <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
        </div>
    </div><br /></div>

    <!-- fourth option (MECH) -->
    <div *ngIf="sectionEditable.fourthOption !== undefined"><strong>{{ sectionEditable.fourthOption }}</strong>
      <div *ngFor="let c of sectionEditable.fourthOptionCourses; let i = index">
        <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

          <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                <td class="courseTitle">{{c.title}}</td>
                <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
          </span>
        </div>

        <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
            <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
            <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
        </div>
    </div><br /></div>

    <!-- fifth option (MECH) -->
    <div *ngIf="sectionEditable.fifthOption !== undefined"><strong>{{ sectionEditable.fifthOption }}</strong>
      <div *ngFor="let c of sectionEditable.fifthOptionCourses; let i = index">
        <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

          <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                <td class="courseTitle">{{c.title}}</td>
                <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
          </span>
        </div>

        <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
            <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
            <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
        </div>
    </div><br /></div>

    <!-- sixth option (MECH) -->
    <div *ngIf="sectionEditable.sixthOption !== undefined"><strong>{{ sectionEditable.sixthOption }}</strong>
      <div *ngFor="let c of sectionEditable.sixthOptionCourses; let i = index">
        <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

          <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                <td class="courseTitle">{{c.title}}</td>
                <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
          </span>
        </div>

        <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
            <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
            <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
        </div>
    </div><br /></div>

    <!-- electives (INDU) -->
    <div *ngIf="sectionEditable.electivesHeader !== undefined">
      <div *ngFor="let c of sectionEditable.electiveCourses; let i = index">
        <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

          <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                <td class="courseTitle">{{c.title}}</td>
                <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
          </span>
        </div>

        <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
            <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
            <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
        </div>
    </div><br /></div>

    <!-- basic science (INDU) -->
    <div *ngIf="sectionEditable.scienceHeader !== undefined"><strong>{{ sectionEditable.scienceHeader }}</strong>
      <br/>{{ sectionEditable.scienceDescription }}
      <div *ngFor="let c of sectionEditable.scienceCoreCourses; let i = index">
        <div *ngIf="courseIds[2*i] === courseIds[2*i+1]">

          <span><td class="courseNumber">{{ c.name }}{{c.number}}</td>
                <td class="courseTitle">{{c.title}}</td>
                <td class="courseCredits">{{c.credits.toFixed(2)}}</td>
          </span>
        </div>

        <div *ngIf="courseIds[2*i] != courseIds[2*i+1]">
            <span style="color:chartreuse">{{ c.name }} {{c.number}} {{c.title}} {{c.credits.toFixed(2)}}</span><br>
            <span style="color:red">{{ originalCourses[i].name }} {{originalCourses[i].number}} {{originalCourses[i].title}} {{originalCourses[i].credits.toFixed(2)}}</span>
        </div>
    </div><br /></div>

    </div></tbody></table>

    


            </span>
            <br>
            <button mat-stroked-button color="primary" (click)="highlightChanges()">Highlight Changes</button>
            <br>
            <span><b>Rationale:</b></span>
            <br>
            <span>{{editedExtraModel.rationale}}</span>
            <div *ngIf="editedExtraModel.rationale == '' ">
              No rationale is available for this section.
            </div>
            <br>
            <span><b>Resource Implications:</b></span>
            <br>
            <span>{{editedExtraModel.implications}}</span>
            <div *ngIf="editedExtraModel.implications == '' ">
              No implication is available for this section.
            </div>
          </mat-card>
      </div>

      <app-support-documents [sectionId]="id" [target_type]="3"></app-support-documents>
      <button class="submitButton" mat-raised-button color="primary" (click)="submitForm()">Submit</button>



    </mat-card>
  </main>
  <footer class="hg__footer">
    <app-footer></app-footer>
  </footer>
</body>
